@using Microsoft.AspNetCore.Identity
@using TRueBalance.Models
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager
@if (SignInManager.IsSignedIn(User))
{
    <form asp-area="" asp-controller="Account" asp-action="Logout" method="post" id="logoutForm" class="navbar-right">
        <div class="menu-extras">
            <ul class="nav navbar-nav pull-right">
                <li class="nav-item">
                    <a class="navbar-toggle">
                        <div class="lines">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </a>
                </li><!-- Mobile menu toggle-->
                <li class="nav-item dropdown notification-list">
                    <a class="nav-link dropdown-toggle arrow-none waves-light waves-effect" data-toggle="dropdown" href="#" role="button"
                       aria-haspopup="false" aria-expanded="false">
                        <i class="zmdi zmdi-notifications-none noti-icon"></i>
                        <span class="noti-icon-badge"></span>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right dropdown-arrow dropdown-lg" aria-labelledby="Preview">
                        <!-- item-->
                        <div class="dropdown-item noti-title">
                            <h5><small><span class="label label-danger pull-xs-right">7</span>Notification</small></h5>
                        </div>
                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item">
                            <div class="notify-icon bg-success"><i class="icon-bubble"></i></div>
                            <p class="notify-details">Robert S. Taylor commented on Admin<small class="text-muted">1min ago</small></p>
                        </a>
                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item">
                            <div class="notify-icon bg-info"><i class="icon-user"></i></div>
                            <p class="notify-details">New user registered.<small class="text-muted">1min ago</small></p>
                        </a>
                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item">
                            <div class="notify-icon bg-danger"><i class="icon-like"></i></div>
                            <p class="notify-details">Carlos Crouch liked <b>Admin</b><small class="text-muted">1min ago</small></p>
                        </a>
                        <!-- All-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item notify-all">
                            View All
                        </a>
                    </div>
                </li><!--Notifications-->
                <li class="nav-item dropdown notification-list">
                    <a class="nav-link dropdown-toggle arrow-none waves-effect waves-light nav-user" data-toggle="dropdown" href="#" role="button"
                       aria-haspopup="false" aria-expanded="false">
                        @{ 
                            string CustomProfilePic;
                            string UserPic = UserManager.GetUserAsync(User).Result.ImgURl;
                            if (String.IsNullOrEmpty(UserPic))
                            {
                                CustomProfilePic = "../assets/Admin/images/users/default.png";
                            }
                            else
                            {
                                CustomProfilePic = UserPic;
                            }
                        }
                        <img src="@CustomProfilePic" alt="user" class="img-circle">
                    </a>
                    <div class="dropdown-menu dropdown-menu-right dropdown-arrow profile-dropdown " aria-labelledby="Preview">
                        <!-- item-->
                        <div class="dropdown-item noti-title">
                            <h5 class="text-overflow">
                                <small>Hola @UserManager.GetUserAsync(User).Result.FirstName!</small>
                            </h5>
                        </div>
                        <!-- item-->
                        <a class="dropdown-item notify-item" style="color:black" asp-area="" asp-controller="Manage" asp-action="Index" title="Manage">
                            <i class="zmdi zmdi-account-circle"></i> <span>Perfil</span>
                        </a>
                        <!-- item-->
                        <a href="@Url.Action("Index", "UserSetting")" class="dropdown-item notify-item">
                            <i class="zmdi zmdi-settings"></i> <span>Configuracion</span>
                        </a>
                        <!-- item-->
                        <a href="javascript:void(0);" onclick="document.getElementById('logoutForm').submit()" class="dropdown-item notify-item">
                            <i class="zmdi zmdi-power"></i> <span>Logout</span>
                        </a>
                    </div>
                </li><!--User Options-->
            </ul>
        </div> <!-- end menu-extras -->
    </form>
}